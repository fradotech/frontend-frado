import { config } from '@/app/_infrastructure/config'
import BannerCard from '@/components/molecules/card/BannerCard'
import Advertisement from '@/components/organism/advertisement/Advertisement'
import LatestPost from '@/components/organism/latestPost/LatestPost'
import { PostAction } from './(routes)/blog/_infrastructure/post.action'
import { IndexSortOderEnum } from './_infrastructure/interfaces/index.interface'

export const metadata = {
  title: `Home Page | ${config.app.name}`,
  description: 'Generated by create next app',
}

export default async function Home() {
  const { data: postsPopular } = await PostAction.fetch({
    sortField: 'views',
    sortOrder: IndexSortOderEnum.Desc,
  })

  const { data: postsLatest } = await PostAction.fetch({
    sortField: 'createdAt',
    sortOrder: IndexSortOderEnum.Desc,
  })

  return (
    <main className="container mx-auto">
      <section>
        <BannerCard data={postsPopular} />
      </section>

      <section className="pt-12">
        <Advertisement />
      </section>

      <section className="my-20">
        <LatestPost data={postsLatest} />
      </section>

      <section className="mb-24">
        <Advertisement />
      </section>
    </main>
  )
}
